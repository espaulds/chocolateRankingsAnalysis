# Chocolate Bar Ratings Dataset
Exploring Factors that Contribute to Chocolate Bar Ratings

## Introduction
To explore the question of what factors contribute to higher ratings in chocolate bars. Initially, I wanted to know where the best chocolate came from. After finding this dataset, I was further intrigued and wanted to know which company was best to buy from and which percent cocoa in chocolate bars was the best. I even looked at patterns demonstrated by the creator of the dataset to account for potential bias in questioning which year of reviewing had the highest ratings. 

### Questions in my Exploration: 
1. Which country of bean origin produces the best chocolate (best average ratings)? the worst?
2. What cocoa percentage produces the best chocolate (best average ratings)? the worst?
3. 
- a) Which country that has chocolate bar producing companies has the best average rating? the lowest?
- b) Which company/manufacturer from the best rated country has the greatest average rating?

4. Which year of doing these ratings has the highest average ratings? the lowest?

### Theories:
I was mainly interested in this dataset due to the fact that I was curious where the best cocoa beans to make chocolate bars come from. I theorized that more countries known for exporting cocoa beans like the Ivory Coast or Ghana would have the best ratings. However, looking further into the dataset, I wanted to also know which cocoa percent produced the best rating; I theorized that lower cocoa percentages would have better ratings, therefore, thinking the highest rating would be around 40%, while the lowest ratings would come from chocolate with higher percentages like 80%. For manufacturers and companies, I assumed that companies based in known for chocolate like Belgium or Switzerland would have the highest ratings. 

## Methods

### Dataset Source:
I used a dataset generated by the founder of Manhattan Chocolate Society: Brady Brenlinski. Brady has reviewed 2,500+ chocolate bars since 2006. The dataset includes each barâ€™s manufacturer, company location, review date, country of bean origin, ingredients, percent cocoa, most memorable characteristics, and its numerical rating. All chocolate bars were rated on a scale 1-4. Brady supplied a copy-paste-able data set open for communal use, which indicates to viewers that it is for communal use. 

### Process:
I started my thought-process behind this project by first roughly pseudocoding how I thought my code should be written. I knew that I needed a method to parse through the CSV file and grab information from specific columns (Company (Manufacturer), Company Location, Cocoa Percent, Review Dates, & Country of Bean Origin) as well as one just to parse through the ratings (Rating) column. I wanted to use ArrayLists so there was room to expand the dataset (or be used in other datasets as well). Thus, I created the methods:
- `public static ArrayList<Double> parseCSVRatings(String filename)` - made specifically to parse the ratings column; returns ArrayList of the ratings 
- `public static ArrayList<String> parseCSVStrings(String filename, String colName)` - made to parse through a given column (colName); returns ArrayList of that column

Once I figured out those methods, I moved on to helper methods that would help organize my process/my code, as well as break-up my code to make it more traceable, legible, and easier to debug. Some of these include aptly named methods such as getRidOfDuplicates, which gets rid of duplicate items in an ArrayList, or averageRating, which gets the average rating of each item in an ArrayList. These methods include:
- `public static ArrayList<String> getRidOfDuplicates(ArrayList<String> withDuplicates)` - made to take in the ArrayList that was initially parsed through from the parseCSVStrings method and return an ArrayList with no duplicate items (noDuplicates)
- `public static ArrayList<Integer> counts(ArrayList<String> withDuplicates)` - made to return a parallel ArrayList to noDuplicates of the counts of how many times a specific item in the original ArrayList was mentioned
- `public static ArrayList<Double> totRatings(ArrayList<String> withDuplicates, ArrayList<Double> ratings)` - takes in the orignal ArrayList (withDuplicates) and the ratings ArrayList (made for parsing the ratings column) and returns an ArrayList of the totals of the ratings for a column
- `public static ArrayList<Double> averageRating(ArrayList<String> noDuplicates, ArrayList<Double> totRatings, ArrayList<Integer> counts)` - made to find the average rating of an item in the noDuplicates ArrayList (with input noDuplicates ArrayList, totRatings ArrayList, and counts ArrayList); returns an ArrayList that holds all the averages of each item

I knew that most of my ArrayLists would have to be parallel in order to make great use of the indexOf attribute in ArrayLists that would make finding certain elements within the ArrayLists faster and simpler. Finally, I add extra methods that made certain aspects, such as what the highest and lowest average ratings of the items were, clearer/more visible to the viewer. 
- `public static String highestAverageRating(ArrayList<Double> averageRatings, ArrayList<String> noDuplicates)` - finds the highest average rating within the averageRatngs ArrayList, takes that index, and returns the item in the noDuplicates ArrayList at that same index (which works because both ArrayLists are parallel)
- `public static String lowestAverageRating(ArrayList<Double> averageRatings, ArrayList<String> noDuplicates)` - does that same but for the lowest average rating
- `public static Double highestAverageRatingValue(ArrayList<Double> averageRatings)` - returns the value of that highest rated item instead of the item
- `public static Double lowestAverageRatingValue(ArrayList<Double> averageRatings)`- does the same but for the lowest average rating

To test my program, I first stayed local to my code and tested hard-coded data that I wrote into the main method. After I found those tests successful, I created a smaller CSV dataset file that rated yogurt (including brands, flavor, base, and rating) and tested my code on that smaller scale. Once I knew that my code worked successfully with imported files (by manually tracing and checking the math done by the program), I finally used my official chocolateRatingsDataset.csv and then cleaned up my print statements to make reading my code more legible. 

After I finished my code, I decided to go back and challenge myself to go deeper within my research and expand on question #3. Originally, I had just asked the question: which company/manufacturer has the best rated chocolate bars and which company/manufacturer has the worst? I wanted to expand on this by parsing through the countries in which all these companies were based and then finding, within the highest average rated country, which company/manufacturer had the highest average rating. This essentially meant further specifying what would be allowed in the new ArrayList being parsed. This also meant the addition of a new method:
- `public static ArrayList<String> specificItems(ArrayList<String> priorCol, ArrayList<String> currentCol, String item)` - takes in priorCol, which is the original parsed ArrayList of the column in which the program wants the ArrayList being made to be guided by, currentCol, which is the parsed ArrayList of the column that the question pertains to, and item, which is a String that should match the output of the prior question (i.e. Chile (for the country that the company is based in)); in this case, this method returns an ArrayList with only the companies within the country that produces chocolate bars with the highest average ratings

I started answering my first question by first parsing through the 'Country of Bean Origin' column with my dataset, as well as the 'Rating' column. Once I had those items in an ArrayList, I knew that I wanted to get the average ratings of each item in the ArrayList, however, I knew that there might be duplicate items, meaning I had to go through the ArrayList and eliminate all duplicates. Once that was saved to a new ArrayList and I had gotten a count of how many times an item was mentioned, I started to find the totals of all the ratings for each item. After that was stored, I used that ArrayList to finally make an ArrayList that held all the average ratings of each item. From there, I wanted to find the highest and lowest rating within that ArrayList and print that for the viewer to see. 

For questions #2, #3A, and #4, the process was nearly identical, except instead of parsing through the Country of Bean Origin Column, I parsed through 'Cocoa Percentage', 'Company Location', and 'Review Dates', respectively. 

For question #3B, I knew I needed to use information from part #3A in order to properly manipulate the new column I needed to parse through. I knew I still needed to parse through the column 'Company (Manufacturer)' and the 'Rating' column. Once that was done, I needed to make sure that the ArrayList that I would be using for the remainder of the question was only the items pertaining to the country found in #3A. After that ArrayList was made, I essentially followed the same steps as the previous questions, except replacing the normal parsed column ArrayList with this new ArrayList with only the specific values.

### Challenges:
I was struck by a lot of challenges while coding for this exploration. One challenge that stands out in particular was that my code read commas within quotes (so within on column) as delimiters and separated an element/token into multiple elements/tokens. This made it so the index for which column was being parsed was correct, however my code was retaining incorrect information regarding the question asked. This problem was made obvious when I was unable to parse through the ratings (Rating) column within the CSV file due to an NumberFormatException, which should not have occurred since Rating is a column of Doubles. Due to this, I decided to look at my CSV file on VSCode and saw that the program was parsing through the header correctly, so the index was correct; however due to commas in String tokens (within quotes), the program read them as delimiters and parsed through the wrong column (which were Strings and not Doubles). To fix this, my teacher, Ms. Zhu, gave me a line of code that the program would read and then know that commas within quotes should not be read as delimiters. 
Another challenge I ran into was in the expansion of my code in question #3. Frequently in the testing of this new question, my program threw IndexOutOfBoundsExceptions. This was mainly do the using my original methods used for my other questions and not specifying/tailoring new methods around this question. After multiple test print statements to find the problem, I added the method specificItems to properly create the new ArrayList that would be used to answer the new question and changed the for loop condition from 'ratings' to 'withDuplicates' in the totRatings method, which just made the method more specific to whatever the input was (in case the ArrayList was not parallel to ratings, which it would not be after the alteration in the specificItems method).

## Conculsion

### Results:
- Question #1: Which country of bean origin has the greatest average rating? The lowest?
In answering this question, my code found that Tobago was the country of bean origin that produced the greatest average rating of chocolate bars (3.625), while Bali produced the lowest average rating (2.5).

- Question #2: Which cocoa percentage has the greatest average rating? The lowest?
In answering this question, my code found that chocolate bars with 50% cocoa produced the highest average ratings (3.75), while chocolate bars with 53% cocoa produced the lowest average rating (2.0).

- Question #3A: Which country that has chocolate bar producing companies has the best average rating? the lowest?
In answering this question, my code found that the country that produces the best chocolate bars based on their average rating is Chile, which had an average rating of 3.75, while India is the country with companies that produced the lowest average rating (2.625).

- Question #3B: Which company/manufacturer from the best rated country has the greatest average rating?
Once my program found that Chile was the country with chocolate bar producing companies that received the overall highest average rating, I went further into the question, asking which company/manufacturer within Chile received the highest average rating. This company is Obolo with average rating of 3.375.

- Question #4: Which year of these reviews has the greatest average rating? The lowest?
In answering this question, my code found that of the years that Brady has been rating chocolate bars, 2017 has the greatest average rating coming in at around 3.62, while 2008 has the lowest average rating (3.0).

### Takeaways: 
Major takeaways from this research include what to look for in the chocolate bars you buy. Based on the taste and preferences of Brady, I might now, when buying chocolate bars, be extra vigilant in finding chocolate that states that its cocoa bean origin is from Tobago and especially cautious of bars that have beans originating in Bali. I would also be attentive when looking at cocoa percent within my chocolate, making sure I find bars that have 53%. This research may also guide me in where to order my chocolate to optimize my pleasure when eating them. I also realize, due to finding which years had the highest average ratings from Brady, that some years Brady may have had harsher standards compared to other years (as he had more to compare it to); meaning I realize that his rating process/criteria may have changed over time.

### Limitations of Research:
A limitation within my research is that when finding the average ratings, my code does not account for the number of times a certain item is stated in the dataset, therefore, I have no idea if the average rating is of multiple bars or just one. This means that if a chocolate bar company only appears once in the dataset and is rated to have chocolate that is 4.0, and another brand appears multiple times and receives several 4.0 but one 2.0, the former will be output as the having the highest average rating, yet it could be argued that the latter is a better brand to buy from as it has multiple perfectly rated chocolate bars but was brought down by a single badly rated bar. 
Another limitation in this research is that taste is very subjective. All of these ratings are based on the tastings of one person who may have certain preferences, making it extremely hard to say if one chocolate bar is really better than another. 

### Potential Additional Questions:
If I had the time, I probably would have expanding on more questions like I did for #3. I would like to know, within the "Most Memorable Characteristics" column, which characteristic was most abundant throughout the dataset and which characteristic tended to generate higher ratings. 
I would have really enjoyed if this dataset also included cost of each bar as I feel I could put together an equation that could calculate the "worth-it-ness" of a chocolate bar or contribute price to rating (ex. $3 bar that rated 3.5 vs. $10 that rated 3.5)